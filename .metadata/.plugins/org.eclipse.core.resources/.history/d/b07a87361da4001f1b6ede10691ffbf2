package Practica1_Contraseñas;

import java.security.SecureRandom;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.time.format.DateTimeParseException;
import java.util.Random;
import java.util.Scanner;

public class GeneraContraseña {

	public Scanner sc=new Scanner (System.in);

	public static GeneraContraseña app=new GeneraContraseña();
	
	public static Random aleatorio=new Random();
	
	public static void main(String[] args) {
		// TODO Auto-generated method stub

		
		
		
		//Peticion de datos
		app.datosPersonales();
		app.tipoContraseña();
		
	}

	//Pido los daros personales
	public void datosPersonales(){
		//Nombre
		System.out.println("Introduce el nombre: ");
		String nombre =sc.next();
		//apellido1
		System.out.println("Introduce su 1º apellido: ");
		String apellido1 =sc.next();
		//apellido2
		System.out.println("Introduce su 2º apellido: ");
		String apellido2 =sc.next();
		//dni
		String dni = ""; // dni introducido por el usuario
        String letras = "TRWAGMYFPDXBNJZSQVHLCKE";
        char letracorrecta = 0; // letra DNI calculada
        
        // bucle de validación del dni
        do {
            System.out.print("Introduce un DNI: ");
            dni = sc.nextLine().toUpperCase();
            if (dni.length() == 8 && dni.matches("\\d{8}")) {
                int numerodni = Integer.parseInt(dni.substring(0, 8));
                int resto = numerodni % 23;
                letracorrecta = letras.charAt(resto);
                System.out.println("DNI: " + dni + letracorrecta);
            } else {
                System.out.println("DNI no válido. Inténtalo de nuevo.");
            }
        } while (dni.length() != 8 || !dni.matches("\\d{8}"));

      //fecha nacimiento
        DateTimeFormatter format = DateTimeFormatter.ofPattern("dd/MM/yyyy");
        LocalDate fecha=null;
      		do {
      			System.out.println("Introduce su fecha de nacimiento: ");
          		String fiechaNacimiento =sc.next();
          		
          		
          	  try {
                  // Comprobar si lo introducido coincide con lo pedido(con la plantilla)
                   fecha = LocalDate.parse(fiechaNacimiento, format);

                
              } catch (DateTimeParseException e) {//Si introduce fecha incorrecta ERR
                  System.err.println("Formato de fecha no válidotiene que ser dd/mm/yyyy");
              }
      		}while (fecha==null);
      		
		
	}
	

	
	
		
	//Aletorio para escoger el tipo de "codificación"
	public void tipoContraseña(){
		Random aleatorio=new Random();
		int tipo=aleatorio.nextInt(1,3);

		if (tipo==1) {
			int tamanio=aleatorio.nextInt(4,8);
			app.caso1(); //caso dados y moneda
		}
		else if (tipo==2) {
			int tamanio=aleatorio.nextInt(4,8);
			app.caso2(tamanio);//caso SecurityRamdom
			}
			
		else {
			int tamanio=aleatorio.nextInt(4,8);
			app.caso3();//Ultimo caso
		}
	}

	public void caso1(){
		
	}
	
	public String caso2(int tamanio) {
		SecureRandom sr =new SecureRandom();
		String contraseniaFinal="";
		String caracteresValidos="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%/&()=";
		
		int longitudContraseniaTipo2=sr.nextInt(5)+4;
		
		for (int i =0;i<longitudContraseniaTipo2;i++) {
			int posicionDelCararter=sr.nextInt(caracteresValidos.length());
			contraseniaFinal=contraseniaFinal+caracteresValidos.charAt(posicionDelCararter);
		}
		return contraseniaFinal;
	}
	
	private void caso3() {
		// TODO Auto-generated method stub

		
		
	}
	
}
